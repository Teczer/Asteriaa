# docker-compose.dev.yml

version: '3'

services:

  backend:
    build:
      context: ./  # Modification du chemin du contexte
      dockerfile: ./docker/backend/Dockerfile.dev  # Correction du chemin du Dockerfile
    ports:
      - "5001:5001"
    volumes:
      - ./backend:/usr/app # Montez le répertoire du backend pour permettre les mises à jour en temps réel
      - /usr/app/node_modules # Volume anonyme pour node_modules seulement
    environment:
      NODE_ENV: development # Définissez l'environnement sur le mode développement
    network_mode: host  # Utilisez le réseau d'hôtes pour se connecter à MySQL
      
  frontend:
    build:
      context: ./  # Modification du chemin du contexte
      dockerfile: ./docker/frontend/Dockerfile.dev  # Correction du chemin du Dockerfile
    ports:
      - "8880:80"
    volumes:
      - ./frontend:/usr/app # Montez le répertoire du frontend pour permettre les mises à jour en temps réel
    environment:
      NODE_ENV: development # Définissez l'environnement sur le mode développement
